# ðŸ“¦ Marketing Analytics Dashboard - Project Structure

**Repository:** mdrnmngl/marketing-feed-analytics  
**Purpose:** Unified marketing analytics combining Shopify, GA4, social media, and ad platforms

---

## ðŸ—‚ï¸ Directory Structure

```
marketing-feed-analytics/          # Main repository root
â”‚
â”œâ”€â”€ index.html                     # Redirect to website/
â”‚
â”œâ”€â”€ website/                       # GitHub Pages frontend
â”‚   â”œâ”€â”€ index.html                # Main dashboard
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css             # Responsive design (500+ lines)
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ data.js               # Analytics data (generated by export_to_json.py)
â”‚       â”œâ”€â”€ charts.js             # Chart.js configurations
â”‚       â””â”€â”€ app.js                # Application logic & DOM manipulation
â”‚
â”œâ”€â”€ scripts/                       # Backend Python scripts
â”‚   â”œâ”€â”€ marketing_analytics_feed.py   # Main data collector (800 lines)
â”‚   â”œâ”€â”€ api_connectors.py             # Platform API integrations (800+ lines)
â”‚   â”œâ”€â”€ export_to_json.py             # Excel â†’ JSON converter
â”‚   â””â”€â”€ requirements.txt              # pandas, requests, google-analytics-data, etc.
â”‚
â”œâ”€â”€ data/                          # Generated data files
â”‚   â”œâ”€â”€ Marketing_Analytics_Feed.xlsx  # 7-sheet Excel output
â”‚   â”œâ”€â”€ influencer_posts.json          # Manual influencer post entries
â”‚   â””â”€â”€ ad_campaigns.json              # Manual campaign event entries
â”‚
â”œâ”€â”€ config/                        # Configuration
â”‚   â””â”€â”€ marketing_config.json     # GA4 property, lookback days, etc.
â”‚
â”œâ”€â”€ run_daily_update.sh            # One-click update script
â”œâ”€â”€ .gitignore                     # Excludes credentials, __pycache__, etc.
â”œâ”€â”€ README.md                      # Main documentation
â”œâ”€â”€ DEPLOYMENT_GUIDE.md            # GitHub Pages setup instructions
â””â”€â”€ WEBSITE_COMPLETE.md            # Feature documentation
```

---

## ðŸ“‚ External Dependencies

### Secrets Directory (NOT in repo)
**Location:** `/Users/modernmangal/Library/CloudStorage/OneDrive-ModernMangal/srv/secrets/`

**Files:**
- `google_analytics_credentials.json` - GA4 service account
- `shopify_orders_credentials.env` - Shopify API token
- `shopify_credentials.env` - Shopify Analytics API
- `instagram_credentials.env` - Instagram Graph API
- `tiktok_credentials.env` - TikTok Business API
- `pinterest_credentials.env` - Pinterest API
- `meta_ads_credentials.env` - Meta Ads Manager API
- `google_ads_credentials.json` - Google Ads service account
- `google_ads_config.env` - Google Ads customer ID

### Shared Data Sources
**Location:** `/Users/modernmangal/Library/CloudStorage/OneDrive-ModernMangal/srv/data/`

**Used by marketing_analytics_feed.py:**
- `orders/Shopify_Master_Order_Tracker.xlsx` - Shopify sales data
- `shopify/*` - Additional Shopify exports

---

## ðŸ”„ Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. DATA COLLECTION (marketing_analytics_feed.py)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ Shopify Orders   â”‚â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                  â”‚
â”‚  â”‚ Google Analytics â”‚â”€â”€â”€â”€â”€â”¤                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  Merge &                         â”‚
â”‚  â”‚ Instagram Posts  â”‚â”€â”€â”€â”€â”€â”¤  Correlate  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                       â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                       â–¼          â”‚
â”‚  â”‚ TikTok Posts     â”‚â”€â”€â”€â”€â”€â”¤              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚              â”‚  Timeline DF    â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚              â”‚  (Pandas)       â”‚ â”‚
â”‚  â”‚ Pinterest Pins   â”‚â”€â”€â”€â”€â”€â”¤              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                       â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                       â”‚          â”‚
â”‚  â”‚ Meta Ads         â”‚â”€â”€â”€â”€â”€â”¤                       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                       â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                       â–¼          â”‚
â”‚  â”‚ Google Ads       â”‚â”€â”€â”€â”€â”€â”˜              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   Excel File    â”‚ â”‚
â”‚                                           â”‚   (7 sheets)    â”‚ â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. DATA EXPORT (export_to_json.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Read: data/Marketing_Analytics_Feed.xlsx                    â”‚
â”‚  â”œâ”€â”€ Timeline sheet â†’ Daily metrics                          â”‚
â”‚  â””â”€â”€ Social Media Details sheet â†’ Post data                  â”‚
â”‚                                                               â”‚
â”‚  Calculate:                                                   â”‚
â”‚  â”œâ”€â”€ Summary stats (total revenue, orders, visitors)         â”‚
â”‚  â”œâ”€â”€ Date range                                              â”‚
â”‚  â””â”€â”€ Format for Chart.js/Leaflet                             â”‚
â”‚                                                               â”‚
â”‚  Write: website/js/data.js (JavaScript module)               â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. VISUALIZATION (website/)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  index.html â†’ Load data.js                                   â”‚
â”‚  â”œâ”€â”€ charts.js â†’ Create Chart.js visualizations             â”‚
â”‚  â”œâ”€â”€ app.js â†’ Populate tables, initialize map               â”‚
â”‚  â””â”€â”€ style.css â†’ Responsive design                           â”‚
â”‚                                                               â”‚
â”‚  User sees:                                                   â”‚
â”‚  â”œâ”€â”€ ðŸ“Š Dashboard (revenue/traffic trends)                   â”‚
â”‚  â”œâ”€â”€ ðŸ“± Social Media (post performance)                      â”‚
â”‚  â”œâ”€â”€ ðŸ”¥ Heat Map (weekly activity)                           â”‚
â”‚  â”œâ”€â”€ ðŸ—ºï¸ Geography (world map)                               â”‚
â”‚  â”œâ”€â”€ ðŸš€ Traffic Sources (referral breakdown)                â”‚
â”‚  â””â”€â”€ ðŸ“‹ Raw Data (daily table)                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ Deployment Flow

```
Local Machine                     GitHub                    GitHub Pages
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Run daily script:
   ./run_daily_update.sh
   â”‚
   â”œâ”€â”€ Fetch data from APIs
   â”œâ”€â”€ Generate Excel          â†’  git add data/*.xlsx
   â”œâ”€â”€ Export to JSON          â†’  git add website/js/data.js
   â””â”€â”€ Commit & push           â†’  git push origin main
                                            â”‚
                                            â–¼
                                   GitHub Actions detects push
                                            â”‚
                                            â–¼
                                   Build & deploy to Pages
                                            â”‚
                                            â–¼
                                   ðŸŒ Live at:
                                   https://mdrnmngl.github.io/
                                   marketing-feed-analytics/
```

---

## ðŸ§© Key Components

### 1. marketing_analytics_feed.py
**Purpose:** Main data orchestrator

**Key Classes:**
- `ShopifyDataConnector` - Read from Order Tracker Excel
- `MarketingAnalyticsFeed` - Orchestrate all data sources
  - `generate_unified_feed()` - Merge all platforms
  - `calculate_correlations()` - Add 7-day impact metrics
  - `export_to_excel()` - Create 7-sheet workbook

**CLI Usage:**
```bash
# Generate feed
python3 scripts/marketing_analytics_feed.py --days 700

# Add manual entries
python3 scripts/marketing_analytics_feed.py --add-influencer
python3 scripts/marketing_analytics_feed.py --add-campaign
```

### 2. api_connectors.py
**Purpose:** API integration layer

**Connectors:**
- `GoogleAnalytics4Connector` - GA4 Data API
- `InstagramConnector` - Instagram Graph API (13 metrics)
- `TikTokConnector` - TikTok Business API
- `PinterestConnector` - Pinterest API
- `ShopifyAnalyticsConnector` - Shopify Analytics API
- `MetaAdsConnector` - Meta Ads Manager API
- `GoogleAdsConnector` - Google Ads API

### 3. export_to_json.py
**Purpose:** Excel â†’ JSON conversion

**Process:**
1. Read `data/Marketing_Analytics_Feed.xlsx`
2. Extract Timeline + Social Media Details
3. Format for JavaScript consumption
4. Write `website/js/data.js` with `analyticsData` object

### 4. Website (website/)
**Technology Stack:**
- Pure vanilla JavaScript (no frameworks)
- Chart.js 4.4.1 (charts)
- Leaflet 1.9.4 (maps)
- Responsive CSS Grid/Flexbox

**Key Files:**
- `index.html` - Single-page app with 6 tabs
- `charts.js` - 5 different Chart.js configurations
- `app.js` - Tab switching, table population, map initialization
- `data.js` - Generated data (replaced on each update)

---

## ðŸ” Security Model

### What's Committed to GitHub
âœ… **Safe to Commit:**
- Website files (HTML/CSS/JS)
- Python scripts (no secrets)
- Generated Excel (aggregated data only)
- Generated JSON (public-facing data)
- Documentation

âŒ **NEVER Commit:**
- Credential files (`*.env`, `*credentials*.json`)
- API keys or tokens
- Service account keys
- Shopify admin tokens

### .gitignore Protection
```gitignore
*.env
*credentials*.json
*credentials*.env
secrets/
```

---

## ðŸ“Š Excel Output Sheets

**File:** `data/Marketing_Analytics_Feed.xlsx`

| Sheet | Contents | Purpose |
|-------|----------|---------|
| **Timeline** | Daily data: revenue, orders, sessions, users, marketing events | Master dataset |
| **Social Media Details** | Individual posts with 13 metrics + 7-day impact | Post performance |
| **Marketing Events** | Days with influencer/campaign activity | Event correlation |
| **Heat Map** | Weekly aggregation with activity levels | Visual patterns |
| **Traffic Sources** | Source breakdown by day | Attribution |
| **Geography** | Traffic by country | Regional analysis |
| **Summary** | Totals, averages, date range | Quick overview |

---

## ðŸŽ¯ Website Features

### Dashboard Tab
- 4 summary cards (revenue, orders, visitors, posts)
- Revenue/Traffic dual-axis line chart
- Platform distribution doughnut chart
- Daily activity bar chart

### Social Media Tab
- Post table (date, platform, influencer, URL)
- 13 metrics per post (views, reach, engagement, etc.)
- 7-day revenue/traffic impact per post

### Heat Map Tab
- Weekly grid with color coding
- High (green), Medium (yellow), Low (gray) activity

### Geography Tab
- Leaflet world map with OpenStreetMap tiles
- Circle markers sized by traffic volume
- Top 10 countries list

### Traffic Sources Tab
- Pie chart of referral sources
- Weekly traffic trend line chart

### Raw Data Tab
- Last 30 days table
- Highlights days with marketing events

---

## ðŸ“ Configuration Files

### config/marketing_config.json
```json
{
  "ga4_property_id": "448993628",
  "ga4_credentials_json": "/Users/.../srv/secrets/google_analytics_credentials.json",
  "lookback_days": 700,
  "correlation_window_days": 7,
  "last_updated": "2026-01-29T..."
}
```

### scripts/requirements.txt
```
pandas>=2.0.0
openpyxl>=3.1.0
requests>=2.31.0
google-analytics-data>=0.17.0
python-dotenv>=1.0.0
```

---

## ðŸ”„ Update Frequency

**Recommended:** Daily updates

**Why:**
- Social media posts change daily
- Ad campaigns launch/pause frequently  
- Shopify orders come in real-time
- GA4 data updates daily

**How:**
```bash
# Manual (from repo root)
./run_daily_update.sh

# OR via cron (future enhancement)
0 9 * * * cd /path/to/repo && ./run_daily_update.sh
```

---

**Last Updated:** January 29, 2026  
**Maintainer:** Modern Mangal Tech Team
